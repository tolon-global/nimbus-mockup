
<ion-view title="" style="width: 100%; height: 100%" hide-nav-bar="true">
  <ion-content ng-controller="cll" scroll="false">
    <ion-scroll class="history hist-close">
    <div>
      <ion-list onscroll="cntList()" class="item-text-wrap" >
        <ion-item  class="rd1" ng-style="{'background-color': '#412A44', 'color':'white'}" ng-repeat="item in list_before"  ng-value="item" ng-model="data12.val" ng-click="goHist(item)">
            {{chats[item].title}}   <i ng-if="answers[list_before.indexOf(item)]== 'Yes'" style="background-color: #38a;display: inline-block; padding: 0 .4em; border-radius: .25em; ">{{answers[list_before.indexOf(item)]}}</i>
          {{console.log(item)}}
          <i ng-if="answers[list_before.indexOf(item)]== 'No'" style="background-color: #842;display: inline-block; padding: 0 .4em; border-radius: .25em;">{{answers[list_before.indexOf(item)]}}</i>
        </ion-item>
      </ion-list>
    </div>
      </ion-scroll>
    <div class="container" on-swipe-left="onSwipeLeft()" on-swipe-right="onSwipeRight()" on-swipe-down="onSwipeDown()">
      <div class="buddy buddy1 buddy2"  style="display: block">
        <h3 class="stage__title">{{chats[next_page].title}}</h3>
        <div class="list-container1">
          <div ng-if="detail" class="item-text-wrap">

          </div>
          <ion-scroll>
          <ion-list style="min-height:5%; max-height: 5%;height: 250px;">
            <div ng-if="detail" class="item-text-wrap">
              <ion-item ng-repeat="data1 in chats[next_page].content" style="background: rgba(0,0,0,0.1); border: none;color: #F9F9F2">
                <b>{{chats[next_page].detail[data1.id-1].id}}.</b> {{chats[next_page].detail[data1.id-1].text}}
              </ion-item>
            </div>
            <div ng-if="!detail">
              <ion-item ng-repeat="text1 in chats[next_page].detail" style="background: rgba(0,0,0,0.1); border: none;color: #F9F9F2">
                <b>{{ text1.id }}.</b> {{ text1.text }}
              </ion-item>
            </div>

            <ion-infinite-scroll  ng-if="!closeInfiniteScroll&&!detail"
                                  on-infinite="loadMore()"
                                  distance="1%">
            </ion-infinite-scroll>
          </ion-list>
            </ion-scroll>
        </div>
        <div class="buttons1">
          <button class="btn-negative icon-left"> </button>
          <button class="btn-positive icon-right"> </button>
        </div>
      </div>
      <div class="buddy buddy1 buddy3"  style="display: block">
        <h3 class="stage__title">{{chats[next_page].title}}</h3>
        <div class="list-container1">
          <ion-scroll  style="min-height:25%; max-height: 25%; height: 20em; position: inherit ;color: #F9F9F2">
          <ion-list   style="min-height:25%; max-height: 25%; background-color: rgba(0,0,0,0.1); border: none;color: #F9F9F2">
            <div ng-if="detail" class="item-text-wrap">
              <video src="https://fog.bilims.com/beta/video/ht_0024.mp4" id="myvideo" style=" max-height: 170px; " controls>
              </video>
              <script type="application/javascript">
                var imported = document.createElement('script');
                imported.src = '/js/app.js';
                document.head.appendChild(imported);
                console.log(next_page);

                var myvid = document.getElementById('myvideo');
                var myvids = [];

                for(var i=0;i<datas.flowchart.element_list[next_page].content.length;i++){
                  myvids.push(datas.flowchart.element_list[next_page].content[i])
                }
                console.log(myvids)
                var activeVideo = 0;
                myvid.addEventListener('ended', function(e) {
                  activeVideo = (++activeVideo) % myvids.length;
                  myvid.src= myvids[activeVideo];
                  myvid.play();
                });
              </script>
              <ion-item ng-repeat="data1 in chats[next_page].content" style="background: rgba(0,0,0,0.1); border: none;color: #F9F9F2">
                <b>{{chats[next_page].detail[data1.id-1].id}}.</b> {{chats[next_page].detail[data1.id-1].text}}
              </ion-item>
            </div>
            <div ng-if="!detail">
              <ion-item ng-repeat="text1 in chats[next_page].detail" style="background: rgba(0,0,0,0.1); border: none; color: #F9F9F2">
                <b>{{ text1.id }}.</b> {{ text1.text }}
              </ion-item>
            </div>
            <ion-infinite-scroll  ng-if="!closeInfiniteScroll&&!detail"
                                  on-infinite="loadMore()"
                                  distance="1%">
            </ion-infinite-scroll>
          </ion-list>

          </ion-scroll>
        </div>
        <div class="buttons1">
          <button class="btn-negative icon-left"> </button>
          <button class="btn-positive icon-right"> </button>
        </div>
      </div>
    </div>
  </ion-content>
</ion-view>


